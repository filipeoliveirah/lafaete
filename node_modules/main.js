// funcão esconder menu ao scroll página
$(function(){   
    var nav = $('#menu-principal'); 
    var navTop = $('#menu-topo');  
    
    $(window).scroll(function () { 
        if ($(this).scrollTop() > 90) { 
            navTop.css('display','none');
            nav.removeClass('bg-light');
            nav.addClass('bg-dark');
        } else { 
            navTop.css('display','block'); 
            nav.addClass('bg-light');
            nav.removeClass('bg-dark');
        } 
    });  
});

// funcão lightbox
$(function(){
    $('.galeria-img a img').click(function(e) {
        $('#carousel').css('display','block');
        e.preventDefault();

        let imagemGaleria = $(this).attr('src');        
        
        /*
        $('.lightBox #itens ul').append(
            '<li><div class="item"><img width="800px" src="'+imagemGaleria+'" class="img-responsive wp-post-image" alt="featured-image-1"></div></li>'
        );*/

        $('.lightBox #itens ul li img').addClass('active');
        $('.lightBox').removeClass('esconder');
        $('.lightBox').addClass('fadeIn animated');         
    });

    $('.fecharBotao').click(function(){
        $('.lightBox #itens ul').removeClass('active');
        $('.lightBox').removeClass('fadeIn animated');  
        $('.lightBox').addClass('esconder');       
    });

    $(document).on('keyup',function(pressEsc) {
        if (pressEsc.keyCode == 27) {
            $('.lightBox').removeClass('fadeIn animated');  
            $('.lightBox').addClass('esconder');  
        }
    });
});


//carousel inner lightbox

var speed = 8000;
var run = setInterval('rotate()', speed);

var item_width = $('#itens li').outerWidth();
var left_value = item_width * (-1);

$('#itens li:first').before($('#itens li:last'));

$('#itens ul').css({'left':left_value});

$('#prev').click(function(){
    var left_intend = parseInt($('#itens ul').css('left')) + item_width;
    $('#itens ul').animate({'left':left_intend}, 200, function(){
        $('#itens li:first').after($('#itens li:last'));
        $('#itens ul').css({'left':left_value});
    });

    clearInterval(run);
    run = setInterval('rotate()', speed);
});


$('#next').click(function(){
    var left_intend = parseInt($('#itens ul').css('left')) - item_width;
    $('#itens ul').animate({'left':left_intend}, 200, function(){
        $('#itens li:first').after($('#itens li:last'));
        $('#itens ul').css({'left':left_value});
    });

    clearInterval(run);
    run = setInterval('rotate()', speed);
});


$('#itens').hover(
    function(){
        clearInterval(run);
    },

    function(){
        clearInterval(run);
        run = setInterval('rotate()', speed);
    }
);

function rotate(){
    $('#next').click();
}

var keys = {37:1, 38:1, 39:1, 40:1};

function preventDefault(e){
    e = e || window.event;
    if(e.preventDefault)
        e.preventDefault();
    e.returnValue = false;
}

function preventDefaultScrollKeys(e){
    if(keys[e.keyCode]){
        preventDefault(e);
        return false;
    }
}

function disableScroll(){
    window.onwheel = preventDefault; // quando rolar o mouse, chama a funcao preventDefault
    window.ontouchmove = preventDefault; // quando tocar na tela e arrastar...
    document.onkeydown = preventDefaultScrollKeys; // quando pressionar a seta para baixo
}

function enableScroll(){
    window.onwheel = null;
    window.onmousemove = null;
    document.onkeydown = null;
}

$('#carousel').css('display','none');


//funcção do filtro pega o hash do link com nome da classe correspondente
//retira o hash para comparar com a classe do link da li com a classe no link da imagem
// tudo que não for a hash clicada ou não for todos, chama a classe para esconder
//senão remove a classe esconder
$(function(){
    $('.menu-imoveis ul li a').click(function(e) {
        e.preventDefault();
        let a = $(this).attr('href');
        a = a.substr(1);
        $('.imagemGaleria').each(function() {
            if (!$(this).hasClass(a) && a != 'todos'){
                $(this).addClass('esconder');
            }                
            else{
                $(this).removeClass('esconder');
            }                
        });
    });
});

$(function(){
    $('.dropdown').mouseover(function(){
        $(this).addClass('show');
        $(this).find('.dropdown-menu').addClass('show');
    });

    $('.dropdown').mouseout(function(){
        $(this).removeClass('show');
        $(this).find('.dropdown-menu').removeClass('show');
    });
})